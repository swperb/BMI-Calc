name: Codacy Security Report

# This workflow is triggered on pushes to the repository.
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  codacy-analysis:
    runs-on: ubuntu-latest
    steps:
    - name: Check out code
      uses: actions/checkout@v3

    # Setup Node.js environment
    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '16'

    # Install dependencies (optional, if you need to install dependencies before analysis)
    - name: Install dependencies
      run: npm install

    # Run Codacy analysis
    - name: Codacy Analysis
      uses: codacy/codacy-analysis-cli-action@d840f886c4bd4edc059706d09c6a1586111c540b
      with:
        # Your Codacy project token
        project-token: ${{ secrets.CODACY_PROJECT_TOKEN }}
        # Optionally, you can configure the analysis to fail if certain criteria are met, e.g., upon finding security issues
        fail-if-issues-exist: true

